# 我的帖子功能说明

## 功能概述

"我的帖子"功能允许用户查看、管理自己发布的所有帖子。该功能需要用户登录后才能使用。

## 功能特性

### 1. 帖子列表展示
- 分页显示用户发布的所有帖子
- 支持下拉刷新和上拉加载更多
- 显示帖子状态（已发布/草稿）
- 显示帖子统计信息（浏览量、点赞数、评论数）

### 2. 帖子管理
- 点击帖子可查看详情
- 支持编辑帖子
- 支持删除帖子（带确认提示）

### 3. 用户认证
- 未登录用户会提示登录
- 自动检查用户认证状态
- 支持跳转到登录页面

## 页面结构

```
pages/my-posts/
├── my-posts.js      # 页面逻辑
├── my-posts.json    # 页面配置
├── my-posts.wxml    # 页面结构
└── my-posts.wxss    # 页面样式
```

## API接口

### 获取我的帖子列表
- **接口地址**: `GET /api/posts/my`
- **请求方法**: GET
- **需要认证**: 是（需要用户登录）
- **内容类型**: application/json

#### 查询参数
| 参数名 | 类型 | 必填 | 默认值 | 说明 |
|--------|------|------|--------|------|
| page | int | 否 | 1 | 页码，从1开始 |
| pageSize | int | 否 | 10 | 每页数量，最大50 |

#### 响应格式
```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "id": "post_id",
      "title": "帖子标题",
      "content": "帖子内容",
      "images": ["image_url1", "image_url2"],
      "status": "published",
      "viewCount": 100,
      "likeCount": 50,
      "commentCount": 20,
      "createdAt": "2024-01-01T00:00:00Z"
    }
  ],
  "total": 100
}
```

### 删除帖子
- **接口地址**: `DELETE /api/posts/{postId}`
- **请求方法**: DELETE
- **需要认证**: 是（需要用户登录）

## 使用方法

### 1. 从个人中心进入
在个人中心页面点击"我的帖子"菜单项即可进入。

### 2. 查看帖子列表
- 页面会自动加载用户的第一页帖子
- 支持下拉刷新重新加载
- 支持上拉加载更多帖子

### 3. 管理帖子
- **查看详情**: 点击帖子卡片查看完整内容
- **编辑帖子**: 点击"编辑"按钮进入编辑页面
- **删除帖子**: 点击"删除"按钮，确认后删除帖子

### 4. 发布新帖子
当没有帖子时，可以点击"发布帖子"按钮创建新帖子。

## 错误处理

### 1. 未登录状态
- 显示登录提示页面
- 提供"去登录"按钮跳转到登录页面

### 2. API错误
- 401错误：自动跳转到登录页面
- 其他错误：显示错误提示信息

### 3. 网络错误
- 显示"获取失败，请重试"提示
- 支持重新加载

## 配置要求

### 1. 微信云托管配置
确保在 `utils/config.js` 中正确配置：
```javascript
module.exports = {
  CLOUD_ENV_ID: 'your-cloud-env-id',
  CLOUD_SERVICE_NAME: 'your-service-name'
};
```

### 2. 小程序配置
在 `app.json` 中已注册页面：
```json
{
  "pages": [
    "pages/my-posts/my-posts"
  ]
}
```

## 注意事项

1. **用户认证**: 该功能需要用户登录后才能使用
2. **权限控制**: 只能查看和管理自己的帖子
3. **数据安全**: 删除操作需要用户确认
4. **性能优化**: 使用分页加载，避免一次性加载过多数据

## 开发说明

### 添加新功能
如需添加新功能，请：
1. 在 `utils/api.js` 中添加相应的API方法
2. 在页面JS文件中添加对应的处理方法
3. 在WXML中添加相应的UI元素
4. 在WXSS中添加相应的样式

### 调试方法
1. 在微信开发者工具中打开项目
2. 确保配置文件正确
3. 使用真机调试测试用户认证功能
4. 查看控制台日志进行调试
